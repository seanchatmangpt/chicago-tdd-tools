# Cargo Nextest Configuration
# Fast unit tests (1s timeout) and slow integration tests (30s timeout)

[profile.default]
# Fast profile for unit tests (1s timeout for SLA compliance)
slow-timeout = { period = "1s", terminate-after = 1 }

# Global timeout: 10 seconds for entire test suite
# (allows for parallel execution while maintaining per-test SLA)
global-timeout = "10s"

# Retry configuration (disabled for deterministic results)
retries = 0

# Parallel execution (faster test runs)
test-threads = "num-cpus"

# Output configuration
status-level = "none"
failure-output = "immediate"

# Exclude testcontainers integration tests from default profile
# These are slow and require Docker - use integration profile instead
# Note: Exclusion is done via command-line --skip flag in Makefile.toml

[profile.integration]
# Slow profile for integration tests (30s timeout)
# Used for testcontainers tests that require Docker
slow-timeout = { period = "30s", terminate-after = 1 }

# Global timeout: 60 seconds for integration test suite
global-timeout = "60s"

# Retry configuration (disabled for deterministic results)
retries = 0

# Parallel execution (slower for integration tests)
test-threads = "num-cpus"

# Output configuration
status-level = "none"
failure-output = "immediate"
