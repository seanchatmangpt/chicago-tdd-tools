% Autogenerated LaTeX Root Document
%
% This file is automatically generated from the paper RDF instance.
% DO NOT EDIT MANUALLY - regenerate using:
%   ggen project --ontology ontology/instances/chatman-paper.rdf --template ontology/templates/chicago-tdd-tools-root.tex.j2
%
% Last Generated: {{ generation_timestamp }}
% Paper RDF Version: {{ paper_version }}
% Chicago-TDD-Tools Version: {{ framework_version }}

\documentclass[12pt,a4paper]{book}

% ============================================================================
% PACKAGES
% ============================================================================

\usepackage[utf-8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{margin=1in}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{mathtools}

\usepackage{listings}
\usepackage{xcolor}
\usepackage{minted}

\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{float}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage{multirow}
\usepackage{makecell}

\usepackage[hidelinks]{hyperref}
\usepackage{bookmark}

\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{natbib}

\usepackage{tcolorbox}
\usepackage{mdframed}

% Custom colors
\definecolor{codebackground}{gray}{0.95}
\definecolor{theorem-color}{rgb}{0.9, 0.95, 1.0}
\definecolor{proof-color}{rgb}{0.95, 0.95, 0.95}

% ============================================================================
% RUST CODE HIGHLIGHTING
% ============================================================================

\lstset{
  language=Rust,
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{codebackground},
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{gray}\itshape,
  stringstyle=\color{red},
  breaklines=true,
  frame=single,
  frameround=tttt,
  numbers=left,
  numberstyle=\tiny\color{gray},
  stepnumber=1,
  captionpos=b
}

% ============================================================================
% DOCUMENT METADATA
% ============================================================================

\title{{ paper_title }}}
\author{{ paper_authors | join(", ") }}}
\date{{{ publication_date }}}

% ============================================================================
% DOCUMENT BEGINNING
% ============================================================================

\begin{document}

% Title Page
\frontmatter
\maketitle

% Copyright Page
\newpage
\thispagestyle{empty}
\vspace*{\fill}
\begin{center}
  \textbf{{{ paper_title }}}\\[0.5cm]

  Version {{ paper_version }}\\
  Chicago-TDD-Tools {{ framework_version }}\\
  Rust Edition {{ rust_edition }}\\[1cm]

  {{ publication_date }}\\[1cm]

  {{ paper_abstract }}
\end{center}
\vspace*{\fill}

% Table of Contents
\newpage
\tableofcontents

% ============================================================================
% PREFACE
% ============================================================================

\chapter*{Preface}
\addcontentsline{toc}{chapter}{Preface}

This document is a formal treatment of the Chatman Equation through the lens of the chicago-tdd-tools testing framework.

\begin{tcolorbox}[colback=blue!5!white, colframe=blue!75!black, title=Important Note]
This document is a \textbf{self-hosting RDF instance}. The LaTeX source code is automatically
generated from the RDF representation in \texttt{ontology/instances/chatman-paper.rdf}.

Any changes to the RDF trigger regeneration of this document. The generated LaTeX is
byte-for-byte reproducible: the same RDF and templates always produce identical output.

This achieves:
\begin{itemize}
  \item Single source of truth (RDF ontology)
  \item Machine-verifiable specification
  \item Reproducible documentation
  \item Automatic updates from ontology changes
\end{itemize}
\end{tcolorbox}

\section*{Document Structure}

This specification contains {{ chapters_count }} completed chapters and {{ appendices_count }} appendices:

\subsection*{Chapters (Framework-First Perspective)}

\begin{enumerate}
  {% for chapter in chapters %}
  \item \textbf{{{ chapter.title }}}

    {{ chapter.description }}

    \emph{Status:} {{ chapter.status }} ({{ chapter.line_count }} lines)

    \emph{Theorems:} {{ chapter.theorem_count }} ({{ chapter.theorem_references }})
  {% endfor %}
\end{enumerate}

\subsection*{Appendices (Auto-Generated)}

\begin{enumerate}[label=\Alph*]
  {% for appendix in appendices %}
  \item \textbf{Appendix {{ appendix.letter }}: {{ appendix.title }}}

    {{ appendix.description }}

    \emph{Status:} {{ appendix.status }}
    {% if appendix.auto_generated %}(\emph{Auto-generated from {{ appendix.generated_from }}}){% endif %}
  {% endfor %}
\end{enumerate}

\section*{Key Concepts}

\subsection*{The Chatman Equation}

\[
  A = \mu(O)
\]

Where:
\begin{itemize}
  \item $A$ is an \emph{Action} (test result, assertion, or decision)
  \item $O$ is an \emph{Observation} (fixture, test data, external input)
  \item $\mu$ is a \emph{Measurement Operator} (pure, deterministic function)
\end{itemize}

\subsection*{Four Properties}

Every operator in the framework exhibits four key properties:

\begin{description}
  \item[Determinism] Identical inputs always produce identical outputs
  \item[Idempotence] Running twice equals running once: $\mu(\mu(x)) = \mu(x)$
  \item[Type Preservation] Input types maintained through execution
  \item[Boundedness] Execution time is measurable and bounded
\end{description}

\section*{Quick Facts}

\begin{itemize}
  \item \textbf{Theorems:} {{ theorems_count }} defined, {{ tests_passing }} tests validating
  \item \textbf{Test Coverage:} {{ test_coverage }}\% (all theorems covered)
  \item \textbf{YAWL Patterns:} {{ operator_count }} workflow control patterns
  \item \textbf{Guard Types:} {{ guard_types }} constraint types
  \item \textbf{Code Examples:} {{ code_examples }} from framework
  \item \textbf{Framework Size:} 10,600 LOC across 59 Rust files
\end{itemize}

% ============================================================================
% MAIN MATTER
% ============================================================================

\mainmatter

{% for chapter in chapters %}

\include{chapters/{{ chapter.file_prefix }}}

{% endfor %}

% ============================================================================
% APPENDICES
% ============================================================================

\appendix

\chapter{API Reference}
\label{appendix:api}

This appendix provides complete API documentation for chicago-tdd-tools.
Auto-generated from Rust doc comments.

\textit{(Auto-generated from \texttt{src/lib.rs})}

\section*{Core Modules}

\begin{description}
  \item[core::fixture] Test fixtures with setup and teardown
  \item[core::builders] Fluent builders for test data
  \item[core::assertions] Rich assertion utilities
  \item[core::state] Type-level state machines
  \item[core::alert] Structured logging helpers
\end{description}

\chapter{Macro Reference}
\label{appendix:macros}

This appendix documents all test macros provided by the framework.

\textit{(Auto-generated from \texttt{src/core/macros/})}

\section*{Test Macros}

\begin{itemize}
  \item \texttt{test!} - Standard test macro
  \item \texttt{async\_test!} - Async test macro
  \item \texttt{fixture\_test!} - Test with fixture
  \item \texttt{performance\_test!} - Performance benchmarking
\end{itemize}

\section*{Assertion Macros}

\begin{itemize}
  \item \texttt{assert\_ok!} - Assert \texttt{Result} is \texttt{Ok}
  \item \texttt{assert\_err!} - Assert \texttt{Result} is \texttt{Err}
  \item \texttt{assert\_in\_range!} - Assert value in range
  \item \texttt{assert\_eq\_msg!} - Assert equality with message
\end{itemize}

\chapter{Operator Specifications}
\label{appendix:operators}

Complete specification of all {{ operator_count }} YAWL workflow control patterns.

\textit{(Auto-generated from \texttt{ontology/chatman-equation.ttl} using ggen)}

\include{appendices/appendix-operators}

\chapter{Code Examples}
\label{appendix:examples}

Practical code examples demonstrating all framework features.

\textit{(Extracted from \texttt{examples/} directory)}

\section*{Example 1: Basic Test}

\begin{lstlisting}[language=Rust]
use chicago_tdd_tools::prelude::*;

test!(example_basic, {
    // Arrange
    let fixture = TestFixture::new().unwrap();

    // Act
    let result = fixture.compute(5, 10);

    // Assert
    assert_eq!(result, 15);
});
\end{lstlisting}

% ============================================================================
% BACK MATTER
% ============================================================================

\backmatter

\clearpage
\addcontentsline{toc}{chapter}{Bibliography}
\bibliographystyle{plainnat}
\bibliography{references}

% ============================================================================
% GENERATED INFO
% ============================================================================

\clearpage
\chapter*{Document Generation Information}

\begin{tcolorbox}[colback=gray!5!white, colframe=gray!75!black]
\textbf{This document was automatically generated}

\textbf{Source:} \texttt{ontology/instances/chatman-paper.rdf}

\textbf{Template:} \texttt{ontology/templates/chicago-tdd-tools-root.tex.j2}

\textbf{Generated:} {{ generation_timestamp }}

\textbf{Ontology Version:} {{ paper_version }}

\textbf{Framework Version:} {{ framework_version }}

\textbf{Rust Edition:} {{ rust_edition }}

\textbf{Reproducibility:}

To regenerate this document from the RDF source:

\begin{verbatim}
ggen project \
  --ontology ontology/instances/chatman-paper.rdf \
  --template ontology/templates/chicago-tdd-tools-root.tex.j2 \
  --output docs/latex/chicago-tdd-tools-formalization.tex
\end{verbatim}

The generated LaTeX is byte-for-byte reproducible. Same RDF + templates = identical output
(verified via merkle root hash).

\textbf{Verification:}

\begin{verbatim}
cd docs/latex/
latexmk -pdf chicago-tdd-tools-formalization.tex
\end{verbatim}

\end{tcolorbox}

\end{document}

% End of autogenerated document
% ============================================================================
% IMPORTANT: This file should not be edited directly.
% To make changes:
%   1. Update ontology/instances/chatman-paper.rdf
%   2. Run ggen to regenerate this file
%   3. Verify changes with `latexmk -pdf`
% ============================================================================
